var CKFinder=function(e,n,t,i){this.BasePath=e||CKFinder.DEFAULT_BASEPATH,this.Width=n||"100%",this.Height=t||400,this.SelectFunction=i||null,this.SelectFunctionData=null,this.SelectThumbnailFunction=i||null,this.SelectThumbnailFunctionData=null,this.DisableThumbnailSelection=!1,this.ClassName="CKFinderFrame",this.StartupPath=null,this.ResourceType=null,this.StartupFolderExpanded=!1,this.RememberLastFolder=!0,this.Id=null,this.ConnectorLanguage="php"};CKFinder.DEFAULT_BASEPATH="/ckfinder/",CKFinder.prototype={Create:function(){document.write(this.CreateHtml())},CreateHtml:function(){var e=this.ClassName;e&&e.length>0&&(e=' class="'+e+'"');var n=this.Id;return n&&n.length>0&&(n=' id="'+n+'"'),'<iframe src="'+this._BuildUrl()+'" width="'+this.Width+'" height="'+this.Height+'"'+e+n+' frameborder="0" scrolling="no"></iframe>'},Popup:function(e,n){e=e||"80%",n=n||"70%","string"==typeof e&&e.length>1&&"%"==e.substr(e.length-1,1)&&(e=parseInt(window.screen.width*parseInt(e)/100)),"string"==typeof n&&n.length>1&&"%"==n.substr(n.length-1,1)&&(n=parseInt(window.screen.height*parseInt(n)/100)),200>e&&(e=200),200>n&&(n=200);var t=parseInt((window.screen.height-n)/2),i=parseInt((window.screen.width-e)/2),o="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,width="+e+",height="+n+",top="+t+",left="+i,r=window.open("","CKFinderPopup",o,!0);if(!r)return!1;var a=this._BuildUrl().replace(/&amp;/g,"&");try{r.moveTo(i,t),r.resizeTo(e,n),r.focus(),r.location.href=a}catch(s){r=window.open(a,"CKFinderPopup",o,!0)}return!0},_BuildUrl:function(e){var e=e||this.BasePath,n="";if(e&&0!=e.length||(e=CKFinder.DEFAULT_BASEPATH),"/"!=e.substr(e.length-1,1)&&(e+="/"),e+="ckfinder.html",this.SelectFunction){var t=this.SelectFunction;"function"==typeof t&&(t=t.toString().match(/function ([^(]+)/)[1]),n+="?action=js&amp;func="+t}if(this.SelectFunctionData&&(n+=n?"&amp;":"?",n+="data="+encodeURIComponent(this.SelectFunctionData)),this.ResourceType&&(n+=n?"&amp;":"?",n+="type="+encodeURIComponent(this.ResourceType)),this.DisableThumbnailSelection)n+=n?"&amp;":"?",n+="dts=1";else if(this.SelectThumbnailFunction||this.SelectFunction){var t=this.SelectThumbnailFunction||this.SelectFunction;"function"==typeof t&&(t=t.toString().match(/function ([^(]+)/)[1]),n+=n?"&amp;":"?",n+="thumbFunc="+t,this.SelectThumbnailFunctionData?n+="&amp;tdata="+encodeURIComponent(this.SelectThumbnailFunctionData):!this.SelectThumbnailFunction&&this.SelectFunctionData&&(n+="&amp;tdata="+encodeURIComponent(this.SelectFunctionData))}return this.StartupPath&&(n+=n?"&amp;":"?",n+="start="+encodeURIComponent(this.StartupPath+(this.StartupFolderExpanded?":1":":0"))),this.RememberLastFolder||(n+=n?"&amp;":"?",n+="rlf=0"),this.Id&&(n+=n?"&amp;":"?",n+="id="+encodeURIComponent(this.Id)),e+n}},CKFinder.Create=function(e,n,t,i){var o;if(null!=e&&"object"==typeof e){o=new CKFinder;for(var r in e)o[r]=e[r]}else o=new CKFinder(e,n,t,i);o.Create()},CKFinder.Popup=function(e,n,t,i){var o;if(null!=e&&"object"==typeof e){o=new CKFinder;for(var r in e)o[r]=e[r]}else o=new CKFinder(e,n,t,i);o.Popup(n,t)},CKFinder.SetupFCKeditor=function(e,n,t,i){var o;if(null!=n&&"object"==typeof n){o=new CKFinder;for(var r in n)if(o[r]=n[r],"Width"==r){var a=o[r]||800;"string"==typeof a&&a.length>1&&"%"==a.substr(a.length-1,1)&&(a=parseInt(window.screen.width*parseInt(a)/100)),e.Config.LinkBrowserWindowWidth=a,e.Config.ImageBrowserWindowWidth=a,e.Config.FlashBrowserWindowWidth=a}else if("Height"==r){var s=o[r]||600;"string"==typeof s&&s.length>1&&"%"==s.substr(s.length-1,1)&&(s=parseInt(window.screen.height*parseInt(s)/100)),e.Config.LinkBrowserWindowHeight=s,e.Config.ImageBrowserWindowHeight=s,e.Config.FlashBrowserWindowHeight=s}}else o=new CKFinder(n);var c=o.BasePath;"/"!=c.substr(0,1)&&-1==c.indexOf("://")&&(c=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+c),c=o._BuildUrl(c);var l=-1!==c.indexOf("?")?"&amp;":"?";e.Config.LinkBrowserURL=c,e.Config.ImageBrowserURL=c+l+"type="+(t||"Images"),e.Config.FlashBrowserURL=c+l+"type="+(i||"Flash");var h=c.substring(0,1+c.lastIndexOf("/"));e.Config.LinkUploadURL=h+"core/connector/"+o.ConnectorLanguage+"/connector."+o.ConnectorLanguage+"?command=QuickUpload&type=Files",e.Config.ImageUploadURL=h+"core/connector/"+o.ConnectorLanguage+"/connector."+o.ConnectorLanguage+"?command=QuickUpload&type="+(t||"Images"),e.Config.FlashUploadURL=h+"core/connector/"+o.ConnectorLanguage+"/connector."+o.ConnectorLanguage+"?command=QuickUpload&type="+(i||"Flash")},CKFinder.SetupCKEditor=function(e,n,t,i){if(null===e){for(var o in CKEDITOR.instances)CKFinder.SetupCKEditor(CKEDITOR.instances[o],n,t,i);return void CKEDITOR.on("instanceCreated",function(e){CKFinder.SetupCKEditor(e.editor,n,t,i)})}var r;if(null!=n&&"object"==typeof n){r=new CKFinder;for(var a in n)if(r[a]=n[a],"Width"==a){var s=r[a]||800;"string"==typeof s&&s.length>1&&"%"==s.substr(s.length-1,1)&&(s=parseInt(window.screen.width*parseInt(s)/100)),e.config.filebrowserWindowWidth=s}else if("Height"==a){var c=r[a]||600;"string"==typeof c&&c.length>1&&"%"==c.substr(c.length-1,1)&&(c=parseInt(window.screen.height*parseInt(c)/100)),e.config.filebrowserWindowHeight=s}}else r=new CKFinder(n);var l=r.BasePath;"/"!=l.substr(0,1)&&-1==l.indexOf("://")&&(l=document.location.pathname.substring(0,document.location.pathname.lastIndexOf("/")+1)+l),l=r._BuildUrl(l);var h=-1!==l.indexOf("?")?"&amp;":"?";e.config.filebrowserBrowseUrl=l,e.config.filebrowserImageBrowseUrl=l+h+"type="+(t||"Images"),e.config.filebrowserFlashBrowseUrl=l+h+"type="+(i||"Flash");var d=l.substring(0,1+l.lastIndexOf("/"));e.config.filebrowserUploadUrl=d+"core/connector/"+r.ConnectorLanguage+"/connector."+r.ConnectorLanguage+"?command=QuickUpload&type=Files",e.config.filebrowserImageUploadUrl=d+"core/connector/"+r.ConnectorLanguage+"/connector."+r.ConnectorLanguage+"?command=QuickUpload&type="+(t||"Images"),e.config.filebrowserFlashUploadUrl=d+"core/connector/"+r.ConnectorLanguage+"/connector."+r.ConnectorLanguage+"?command=QuickUpload&type="+(i||"Flash")};